name: PR Checks

on:
  workflow_call:
    inputs:
      config_path:
        description: 'Path to pipeline configuration file'
        type: string
        default: '.github/pipeline-config.yml'
    secrets:
      composer_auth:
        description: 'Composer authentication JSON'
        required: true

# Prevent multiple PR checks from running simultaneously for the same PR
concurrency:
  group: pr-checks-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true

jobs:
  quality-checks:
    name: 'Quality checks'
    uses: meteor-digital/github-actions/.github/workflows/quality-checks.yml@main
    with:
      config_path: ${{ inputs.config_path }}
      check_changed_files_only: true
      run_slow_testsuites: false
    secrets:
      composer_auth: ${{ secrets.composer_auth }}