# Example verify-release-next workflow for Shopware projects
# This file demonstrates how to reference the reusable verify-release-next workflow

name: Verify Release Next

on:
  schedule:
    # Run every 30 minutes during working hours (8:00-18:00 Brussels time)
    # Brussels time is UTC+1 (winter) or UTC+2 (summer)
    # This schedule runs at 7:00-17:00 UTC to cover both seasons
    - cron: '0,30 7-17 * * 1-5'  # Every 30 minutes, 7:00-17:00 UTC, Monday-Friday
  
  # Allow manual triggering for testing
  workflow_dispatch:
    inputs:
      branch_name:
        description: 'Branch to validate'
        required: false
        default: 'release/next'

jobs:
  run:
    uses: meteor-digital/github-actions/.github/workflows/verify-release-next.yml@main
    with:
      branch_name: ${{ github.event.inputs.branch_name || 'release/next' }}
      config_path: ".github/pipeline-config.yml"
      schedule_timezone: "Europe/Brussels"
    secrets:
      composer_auth: '{"http-basic":{"satis.meteor.be":{"username":"${{ secrets.METEOR_SATIS_USERNAME }}","password":"${{ secrets.METEOR_SATIS_PASSWORD }}"}},"bearer":{"packages.shopware.com":"${{ secrets.SHOPWARE_STORE_BEARER_TOKEN }}"}}'
      test_env_vars: ${{ secrets.TEST_ENV_VARS }}