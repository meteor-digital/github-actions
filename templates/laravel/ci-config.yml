# CI Configuration for Laravel Projects
# Schema: https://raw.githubusercontent.com/meteor-digital/github-actions/main/schemas/ci-config.schema.json

project:
  name: "my-laravel-app"  # Used for artifacts, notifications, and releases
  # type: "laravel"  # Auto-detected from artisan file
  
runtime:
  php_version: "8.2"  # PHP version for builds and quality checks
  node_version: "20"  # Node.js version for asset compilation
  php_extensions: "mbstring, intl, gd, xml, zip, curl, opcache, redis, mysql"
  
build:
  # Files and directories to exclude from build artifacts
  exclude_patterns: |
    *.git*
    node_modules/*
    tests/*
    .env*
    .env.local*
    .env.testing*
    storage/logs/*
    storage/framework/cache/*
    storage/framework/sessions/*
    storage/framework/testing/*
    storage/framework/views/*
    bootstrap/cache/*
    *.log
    *.cache
    .phpunit.result.cache
    .php-cs-fixer.cache
  
  # Commands to run during build process
  build_commands:
    - "npm run build"
    - "composer install --no-dev --optimize-autoloader"
    - "php artisan config:cache"
    - "php artisan route:cache"
    - "php artisan view:cache"
  
artifacts:
  retention_days: 7  # Keep artifacts for 7 days