# CI Configuration for Symfony Projects
# Schema: https://raw.githubusercontent.com/meteor-digital/github-actions/main/schemas/ci-config.schema.json

project:
  name: "my-symfony-app"  # Used for artifacts, notifications, and releases
  # type: "symfony"  # Auto-detected from symfony.lock file
  
runtime:
  php_version: "8.1"  # PHP version for builds and quality checks
  node_version: "18"  # Node.js version for asset compilation
  php_extensions: "mbstring, intl, gd, xml, zip, curl, opcache, redis, mysql"
  
build:
  # Files and directories to exclude from build artifacts
  exclude_patterns: |
    *.git*
    node_modules/*
    tests/*
    .env*
    .env.local*
    .env.test*
    var/cache/*
    var/log/*
    public/bundles/*
    *.log
    *.cache
    .phpunit.result.cache
    .php-cs-fixer.cache
  
  # Commands to run during build process
  build_commands:
    - "npm run build"
    - "composer install --no-dev --optimize-autoloader"
    - "bin/console cache:warmup --env=prod"
    - "bin/console assets:install --env=prod"
  
artifacts:
  retention_days: 7  # Keep artifacts for 7 days